# Глобальные переменные

## Глобальные переменные

|  Переменная  |   Тип   | Описание                                                                                                    |
| :----------: | :-----: | ----------------------------------------------------------------------------------------------------------- |
|  curUserID   | Integer | ID объекта текущего пользователя                                                                            |
|   curUser    | Object  | TopElem объекта текущего пользователя                                                                       |
| curObjectID  | Integer | ID текущего объекта (соответствует &object_id=... в адресной строке)                                        |
|  curObject   | Object  | TopElem текущего объекта                                                                                    |
| curObjectDoc | Object  | Объект текущего документа                                                                                   |
|   curDocID   | Integer | ID объекта текущего документа (соответствует &doc_id=... в адресной строке)                                 |
|    curDoc    | Object  | TopElem объекта текущего документа                                                                          |
|   curMode    | String  | Значение текущего мода (соответствует &mode=...)                                                            |
|  curAccess   | Boolean | Результат проверки доступа к текущему объекту(object_id) и/или к текущему документу(doc_id)                 |
|   Session    |   Any   | Содержит данные передаваемые между запросами. (сюда можно добавить свои данные. (Session.mydata="any data") |
|  curDesign   |         | TopElem документа дизайна текущего сайта                                                                    |
|   curSite    |         | TopElem документа текущего сайта                                                                            |
|   curHost    |         | TopElem документа текущего хоста                                                                            |
|    curLng    |         | Код текущего языка                                                                                          |

## Прочие переменные

|   Переменная    |  Тип   | Описание                                                                                                                                                                                              |
| :-------------: | :----: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| global_settings | Object | Содержит значения различных настроек WebTutor. Подробнее [тут](https://news.websoft.ru/_wt/wiki_base/6778868976594220681/base_wiki_article_type_id/6680054725638828770/parent_id/6680061488781884204) |

## Глобальный объект lists

| Поле                        | Значение | Описание |
| :-------------------------- | :------: | -------- |
| view_conditions_schemes     |  Object  |          |
| object_resource_types       |          |          |
| locations                   |          |          |
| benefits                    |          |          |
| event_forms                 |          |          |
| organizational_forms        |          |          |
| facts                       |          |          |
| filters                     |          |          |
| person_states               |          |          |
| professional_areas          |          |          |
| import_excel_person_schemes |          |          |
| web_requirements            |          |          |
| ext_externalscripts         |          |          |
| competence_types            |          |          |

## Глобальные переменные в агентах

| Переменная     |   Тип   | Описание                                 |
| :------------- | :-----: | ---------------------------------------- |
| OBJECT_ID      | Integer | Параметр передаваемый при запуске агента |
| OBJECTS_ID_STR | String  | Параметр передаваемый при запуске агента |

## Глобальные переменные в уведомлениях

| Переменная |  Тип   | Описание                                                              |
| :--------- | :----: | --------------------------------------------------------------------- |
| objDoc     | Object | Указатель на первый объект контекста                                  |
| objDocSec  | Object | Указатель на второй объект контекста (опционально)                    |
| Text       | String | значение дополнительного текстового параметра контекста (опционально) |

## Остальные переменные

|    Переменная    |        Тип         | Описание                                                                                                                                                                                                                                                                                                                                                                                                              |
| :--------------: | :----------------: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|  CurAuthObject   |       Object       | Возвращает ссылку на объект текущего авторизованного пользователя системы (значение, которое вернул метод OnCheckAuth()). При вызове вне авторизованного контекста возвращает пустую сроку. Работает только на сервере приложения                                                                                                                                                                                     |
| CurAuthObjectUrl |                    | Возвращает url текущего авторизованного пользователя системы. При вызове вне авторизованного контекста возвращает пустую сроку. Работает как на клиенте так и на сервере приложения                                                                                                                                                                                                                                   |
|     CurDate      |                    | Возвращает значение текущей даты и времени                                                                                                                                                                                                                                                                                                                                                                            |
|    CurRequest    |                    | Будучи вызванным из обработчика HTTP-запроса на сервере, возвращает текущий запрос (объект Request). В остальных случаях возвращает undefined                                                                                                                                                                                                                                                                         |
|    DefaultDb     |                    | Объект типа Database, содержащий основную (и как правило единственную) базу данных приложения. Если база данных не определена, выдает сообщение об ошибке: Default database has not been specified. Наименование основной базы данных считывается из поля 'default_db' из файла описания структуры приложения, который загружается при запуске исполнимого файла. Как правило, основная база данных называется 'data' |
|  DefaultDbName   |                    | Содержит имя (name) базы данных по умолчанию. Наименование базы данных по умолчанию считывается из поля 'default_db' из файла описания структуры приложения, который загружается при запуске исполнимого файла. Как правило, база данных по умолчанию называется 'data'                                                                                                                                               |
|    GlobalEnv     |                    | Экспериментальная глобальная переменная, возвращает объект, у которого в качестве методов и атрибутов доступны все функции и глобальные переменные для работа с базой данных приложения. Используется, например, для передачи во внешние COM-объекты                                                                                                                                                                  |
|    IsLdsAdmin    | boolean, read only | Имеет значение true, если программа использует сервер приложений (т.е. UseLds == true) при условии, что текущий пользователь обладает правами администратора. Если программа не использует сервер приложений, попытка обращения к переменной приводит к ошибке. Переменная используется при авторизации пользователя                                                                                                  |
|     IsWebUi      | boolean, read only | Выдает true, если пользователь использует web-интерфейс, и false, если не использует                                                                                                                                                                                                                                                                                                                                  |
|   LdsCurUserID   |                    | Переменная содержит ID пользователя, под логином которого осуществляется для доступа к серверу приложений. Переменная определена только для сетевой версии программы (т.е. если UseLds == true), иначе она равна пустой строке. В E-Staff переменная используется, например, для заполнения поля 'user_id' при создании записей типа event, candidate, vacancy и др.                                                  |
|   LdsIsClient    |                    | Если переменная равна true, это означает, что программа работает в режиме пользовательского рабочего места (сетевого или локального). Если false, программа может работать в режиме сервера, смотри LdsIsServer                                                                                                                                                                                                       |
|   LdsIsServer    |                    | Если переменная имеет значение true, то программа работает в режиме сервера. Если false, то программа может работать в режиме пользовательского рабочего места (сетевого или локального), смотри LdsIsСlient                                                                                                                                                                                                          |
|     LdsLogin     |                    | Переменная содержит логин пользователя для доступа к серверу приложений. Смотри так же LdsPassword                                                                                                                                                                                                                                                                                                                    |
|   LdsPassword    |                    | Содержит пароль для доступа к серверу приложений. Используется при авторизации клиента на сервере. Смотри так же LdsLogin                                                                                                                                                                                                                                                                                             |
| LdsServerAddress |                    | Если программа является сетевым рабочим местом, то переменная содержит адрес сервера приложений, иначе - пустую строку                                                                                                                                                                                                                                                                                                |
